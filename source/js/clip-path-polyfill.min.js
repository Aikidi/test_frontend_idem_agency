window.console||(window.console={log:function(){},error:function(){},debug:function(){}});var polyClip=new function(){var me=this,ctx,images,pathFor=[],cache=[],canvasCache=[],loaded=0,callbacks=[],callbacksExecuted=!1,imagesLoaded=0,isIOS=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),doesSupportSVG=!isIOS&&!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,configNode,clippreference,forcepointerevents,showDebugMessages=!1,canUseSVG=!1;function debug(e){showDebugMessages&&console.log(e)}function supportsHTMLPointerEvents(){var e,t=document.createElement("x"),r=document.documentElement,a=window.getComputedStyle;return"pointerEvents"in t.style&&(t.style.pointerEvents="auto",t.style.pointerEvents="x",r.appendChild(t),e=a&&"auto"===a(t,"").pointerEvents,r.removeChild(t),!!e)}function getObjectSize(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}function cacheImage(e,t){var r=new Image;jQuery(t).attr("data-polyclip-index",e),jQuery(r).bind("load",function(a){var n=jQuery(t);n.attr("data-polyclip-transformorigin")||n.attr("data-polyclip-transformorigin",t.width/2+","+t.height/2),debug("Cached "+r.src),cache[r.src]=r,drawShape(e,t);var o=getObjectSize(cache);images.length==o?me.runCallbacks():debug("Cached "+images.length+" out of "+o+" images.")}),r.src=t.src}function drawShapeEvent(e){me.index++,drawShape(me.index,e.target)}function supports_canvas(){return!!document.createElement("canvas").getContext}function randInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function pushTransformCoords(e,t,r,a,n){var o=e.x(t.add(r));return o=o.add(a),n.push(o.e(1)),n.push(o.e(2)),o}function getTransformedCoords(e,t,r,a){var n,o=jQuery.trim(e),i=null==r?0:r,s=null==a?0:a,l=$V([-i,-s,0]),c=$V([i,s,0]);if(0!=o.indexOf("path:")){var p=[],u=o.split(",");for(h=0;h<u.length;h+=2)pushTransformCoords(t,n=$V([parseInt(jQuery.trim(u[h])),parseInt(jQuery.trim(u[h+1])),1]),l,c,p),debug(t.e(1,1));return p.join(",")}for(var d=(o=o.substring(5)).replace(","," ").split(/\s+/),m=[],g=$V([0,0,1]),f=null,h=0;h<d.length;){console.log(d);var y=d[h];isNaN(parseFloat(y))?m.push(y):(y=f,h--);var v=y.toUpperCase(),w=0;switch(v){case"M":case"L":case"T":w=1;break;case"S":case"Q":case"C":w=2}switch(v){case"H":pushTransformCoords(t,n=$V([parseFloat(d[h+1]),g.e(2),1]),l,c,m);break;case"V":pushTransformCoords(t,n=$V([g.e(1),parseFloat(d[h+1]),1]),l,c,m);break;case"M":case"L":case"T":case"S":case"Q":case"C":for(var C=0;C<w;C++)pushTransformCoords(t,n=$V([parseFloat(d[h+2*C+1]),parseFloat(d[h+2*C+2]),1]),l,c,m);break;case"A":m.push(d[h+1],d[h+2],d[h+3],d[h+4],d[h+5]),pushTransformCoords(t,n=$V([parseFloat(d[h+6]),parseFloat(d[h+7]),1]),l,c,m)}h+=1+2*w,f=y,g=n}}function isImageThere(e,t){for(var r=parseInt(jQuery.trim(t[0])),a=parseInt(jQuery.trim(t[1])),n=-1;n<=1;n++)for(var o=0;o<=1;o++)if(0!=e.getImageData(r+n,a+o,1,1).data[3])return!0;return!1}function getFromCache(e){return cache[e]}function getConfigNode(){for(var e=document.getElementsByTagName("script"),t=null,r=0;r<e.length;r++){var a=e[r];a.src.match("polyclip(-p){0,1}.js")&&(t=a)}return t&&hasDataset(t)||(t=document.body),t}function hasDataset(e){var t=!1;return jQuery.each(e.attributes,function(e,r){0==r.name.indexOf("data-")&&(t=!0)}),t}if(me.useSVGGlobally=!1,me.aniamtionNode=null,me.index=-1,me.isOldIE=window.G_vmlCanvasManager,me.polygonCache=[],me.init=function(){debug("Initializing."),(configNode=getConfigNode())&&(clippreference=configNode.getAttribute("data-polyclip-clippreference"),forcepointerevents=configNode.getAttribute("data-polyclip-forcepointerevents"),showDebugMessages=configNode.getAttribute("data-polyclip-showdebugmessages")||!1,canUseSVG=!me.isOldIE&&!isIOS&&"true"==forcepointerevents,"SVG"==clippreference&&canUseSVG&&!supportsHTMLPointerEvents()&&(me.useSVGGlobally=!0)),me.$animationNode=jQuery('<div id="polyClip-tmp" />'),document.body.appendChild(me.$animationNode.get(0)),debug("Clipping "+(images=jQuery("img[data-polyclip]")).length+" image(s)."),images.length>0?images.each(cacheImage):me.runCallbacks()},me.clipImage=function(e,t,r,a,n){var o,i,s=e.jquery?e:jQuery(e),l=t,c=s.attr("data-polyclip-transformorigin");return e=e.jquery?e.get(0):e,c&&(c=c.split(",")),c&&2==c.length&&(o=parseFloat(c[0]),i=parseFloat(c[1])),!c||isNaN(o)||isNaN(i)?(a=e.offsetWidth/2,n=e.offsetHeight/2):(a=o,n=i),e=e.jquery?e.get(0):e,r&&(window.$M?(debug("transform: "+r),"string"==typeof r&&(r=MatrixGenerator.getTransformationMatrix(r)),l=getTransformedCoords(t,r,a,n),debug(r)):debug("Sylvester.js is needed for scaling clip. Transformation aborted.")),s.attr("data-polyclip-transformcoords",l).attr("data-polyclip-transformorigin",a+","+n).each(drawShape),s},me.transformClip=function(e,t,r,a){var n=e.jquery?e:jQuery(e);me.clipImage(n,n.attr("data-polyclip"),t,r,a)},drawShape=function(e,t){var r,a,n,o,i,s,l,c,p=jQuery(t),u=jQuery.trim(p.attr("data-polyclip")),d=jQuery.trim(p.attr("data-polyclip-transformcoords")),m=p.attr("data-polyclip-transformorigin").split(","),g=(parseFloat(m[0]),parseFloat(m[1]),d||u),f=t.src,h=t.id?t.id:"polyClip"+e,y=p,v=(me.useSVGGlobally||"SVG"==t.getAttribute("data-polyclip-clippreference")||"SVG"==t.nodeName.toUpperCase())&&canUseSVG;if(i=[],0==g.indexOf("path:"))a=g.substr(5);else{r=g.split(",");for(var w=p[0].width,C=p[0].height,S=0;S<r.length;S+=2){var b=parseInt(jQuery.trim(r[S]))/100*w,j=parseInt(jQuery.trim(r[S+1]))/100*C;i.push(b+","+j+" ")}}if(v||a){var x='width="'+t.offsetWidth+'" height="'+t.offsetHeight+'"';c='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="'+h+'" class="polyClip-clipped"  xmlns:xlink="http://www.w3.org/1999/xlink" '+x+'><defs><pattern id="polyClip-img-for-'+h+'" patternUnits="userSpaceOnUse" '+x+'><image xlink:href="'+f+'" x="0" y="0" '+x+"/></pattern></defs>",c+=a?'<path id="polyClip-poly-for-'+h+'" d="'+a+'" style="fill:url(\'#polyClip-img-for-'+h+"');\" /></svg>":'<polygon id="polyClip-poly-for-'+h+'" points="'+i.join()+'" style="fill:url(\'#polyClip-img-for-'+h+"');\" /></svg>"}switch(t.nodeName.toUpperCase()){case"IMG":if(s=t.offsetWidth,l=t.offsetHeight,v){var I;I=(new DOMParser).parseFromString(c,"application/xml"),importNode=t.ownerDocument.importNode(I.documentElement,!0),p.attr("id","").replaceWith(importNode),(o=jQuery(importNode)).attr("data-polyclip",u).attr("data-polyclip-transformcoords",d).attr("data-polyclip-transformorigin",m).attr("data-polyclip-transformoriginy",m),me.polygonCache[h]=jQuery("#polyClip-poly-for-"+h,o).get(0),s=t.offsetWidth,l=t.offsetHeight,y=o}else{var M=document.createElement("canvas"),Q=jQuery(M),k=p.attr("data-polyclip-width");M.width=k?parseInt(k):s;var E=p.attr("data-polyclip-height");M.height=E?parseInt(E):l,M.id=h,Q.attr("data-polyclip",u).attr("data-polyclip-transformcoords",d).attr("data-polyclip-transformorigin",m).attr("data-src",f).addClass("polyClip-clipped"),p.replaceWith(M),me.isOldIE&&G_vmlCanvasManager.initElement(M),n=M.getContext("2d"),canvasCache[h]=n,jQuery(window).trigger("resize");var N=(y=Q).css("pointer-events");me.polygonCache[h]={ctx:n,imageData:n.getImageData?n.getImageData(0,0,M.width,M.height).data:null,pointerEventCSS:N?N.toLowerCase():null}}break;case"SVG":a?me.polygonCache[h].setAttribute("d",a):me.polygonCache[h].setAttribute("points",i.join());break;case"CANVAS":M=t,f=p.attr("data-src"),n=canvasCache[h]}if(!v){pathFor[M.id]=[];M.width,M.height;if(n.save(),n.clearRect(0,0,M.width,M.height),a)n.drawSvg(c,0,0,s,l);else{n.beginPath();for(S=0;S<r.length;S+=2){b=parseInt(jQuery.trim(r[S]))/100*M.width,j=parseInt(jQuery.trim(r[S+1]))/100*M.height;pathFor[M.id].push({x:b,y:j}),0==S?n.moveTo(b,j):n.lineTo(b,j)}n.closePath()}if(me.isOldIE){n.fillStyle="",n.fill();var T=jQuery("fill",M).get(0),G=jQuery("shape",M).get(0);T.color="none",G.fillcolor="none",T.src=f,T.type="tile",T.alignShape=!1}else{var F=getFromCache(f),V=n.createPattern(F,"repeat");n.fillStyle=V,n.fill()}n.restore();N=y.css("pointer-events");me.polygonCache[h]={ctx:n,imageData:n.getImageData?n.getImageData(0,0,M.width,M.height).data:null,pointerEventCSS:N?N.toLowerCase():null}}return y},me.findObject=function(e){var t=e.currentTarget;if(jQuery(t).hasClass("cropParent"))return jQuery(t);for(var r in pathFor)if(pathFor.hasOwnProperty(r)){var a=jQuery("#"+r),n=e.pageX,o=e.pageY;if(me.isInPolygon(a,n,o,!0))return a}},me.isInPolygon=function(e,t,r,a){var n,o,i,s,l,c,p,u,d,m=e.get(0),g=pathFor[m.id],f=g.length,h=!1,y={left:0,top:0};if(a&&(y=e.offset()),f<3)return!1;for(i=g[f-1].x+y.left,s=g[f-1].y+y.top,d=0;d<f;d++)n=g[d].x+y.left,o=g[d].y+y.top,n>i?(l=i,p=n,c=s,u=o):(l=n,p=i,c=o,u=s),n<t==t<=i&&(r-c)*(p-l)<(u-c)*(t-l)&&(h=!h),i=n,s=o;return h},me.addCallback=function(e){callbacks.push(e)},me.runCallbacks=function(){debug("Cached all images.  Running callbacks...");for(var e=0;e<callbacks.length;e++)callbacks[e]()},window.$M)var MatrixGenerator=new function(){var me=this,reUnit=/[a-z]+$/,reTransformListSplitter=/[a-zA-Z]+\([^\)]*\)\s*/g,reLeftBracket=/\(/g,reRightBracket=/\)/g,reComma=/,/g;function degreesToRadians(e){return e*Math.PI/180}function getRadianScalar(e){var t,r=parseFloat(e),a=e.match(reUnit);if("0"==jQuery.trim(e)&&(r=0,a="rad"),1!=a.length||0==r)return 0;switch(a=a[0]){case"deg":t=degreesToRadians(r);break;case"rad":t=r;break;default:throw"Not an angle: "+e}return t}me.identity=$M([[1,0,0],[0,1,0],[0,0,1]]),me.prettyPrint=function(e){return StringHelpers.sprintf("| %s %s %s | - | %s %s %s | - |%s %s %s|",e.e(1,1),e.e(1,2),e.e(1,3),e.e(2,1),e.e(2,2),e.e(2,3),e.e(3,1),e.e(3,2),e.e(3,3))},me.rotate=function(e){var t=getRadianScalar(e);return Matrix.RotationZ(t)},me.scale=function(e,t){return e=parseFloat(e),t=t?parseFloat(t):e,$M([[e,0,0],[0,t,0],[0,0,1]])},me.scaleX=function(e){return me.scale(e,1)},me.scaleY=function(e){return me.scale(1,e)},me.skew=function(e,t){var r,a=getRadianScalar(e);return r=null!=t?getRadianScalar(t):a,null!=a&&null!=r?$M([[1,Math.tan(a),0],[Math.tan(r),1,0],[0,0,1]]):null},me.skewX=function(e){return me.skew(e,"0")},me.skewY=function(e){return me.skew("0",e)},me.translate=function(e,t){var r=parseInt(e),a=parseInt(t);return $M([[1,0,r],[0,1,a],[0,0,1]])},me.translateX=function(e){return me.translate(e,0)},me.translateY=function(e){return me.translate(0,e)},me.matrix=function(e,t,r,a,n,o){return $M([[e,r,parseInt(n)],[t,a,parseInt(o)],[0,0,1]])},me.getTransformationMatrix=function(transformString,doThrowIfError){debug("transformString is "+transformString);var transforms=transformString.match(reTransformListSplitter);if(doThrowIfError){var checkString=transforms.join(" ").replace(/\s*/g," "),normalizedCSSProp=transformString.replace(/\s*/g," ");if(checkString!=normalizedCSSProp)throw"An invalid transform was given: "+transformString}var resultantMatrix=MatrixGenerator.identity;debug("num of transforms "+transforms.length);for(var j=0;j<transforms.length;j++){var transform=transforms[j];transform=transform.replace(reLeftBracket,'("').replace(reComma,'", "').replace(reRightBracket,'")');try{debug("looking up : "+transform);var matrix=eval("MatrixGenerator."+transform);resultantMatrix=resultantMatrix.x(matrix)}catch(e){if(doThrowIfError){var method=transform.split("(")[0],funcCall=transform.replace(/\"/g,"");throw null==MatrixGenerator[method]?"Error: invalid tranform function: "+funcCall:"Error: Invalid or missing parameters in function call: "+funcCall}}}return resultantMatrix}}};document.write('<style type="text/css">img[data-polyclip], img.polyClip { visibility: hidden; } </style>'),polyClip.isOldIE?jQuery(window).bind("load",polyClip.init):jQuery(document).ready(polyClip.init);